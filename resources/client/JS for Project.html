<!DOCTYPE html>
<html lang='en'>

<head>

    <style>
        table {
            border-collapse: collapse;
            border: 1px solid black;
        }
    </style>

    <title>JavaScript for the exam</title>

    <script>

        "use strict";                                               	// in strict mode, helps you write cleaner code for example can't use undeclared variables,

        function pageLoad() {                                       	// use this method to run code when you page has loaded eg check user is logged in, add data to a table
            console.log("Invoked pageLoad() ");                     	//  your BFF for debugging!!! Don't use alerts as you'll have to remove all of them in final version
                                                                        // See output in Console in Chrome tab using Control + Shift + J
        }


        function myFunction() {                                         // function declaration - return statement is implicit meaning the return value is undefined

            console.log("Function myFunction() ran");

            //Create a JSON Object					// key is "name", value is John etc
            let myJSONObject = {"name": "John", "age": 30, "car": "Lambourgini"};
            // let not var?  var variables have function scope while let is block like Java
            let x = myJSONObject.name;                                  // you can use dot notation to access object values, like record data structures
            document.getElementById("name").innerHTML = "The value of the key called name is " + x;

            let values;
            for (values in myJSONObject) {                                          // for-in loop makes cycling through object easy
                document.getElementById("demo").innerHTML += myJSONObject[values];  // you can use bracket notation to access values
            }

            //Create JSON array
            let myJSONArray = [
                {"name": "Curry", "source": "bbcgoodood.com", "feeds": 4},
                {"name": "Lasagna", "source": "recipes.com", "feeds": 6},
                {"name": "Fish Pie", "source": "waitrose.com", "feeds": 4}
            ];

            alert(myJSONArray[1].name + " " + myJSONArray[1].source);  	//outputs Lasagna and recipes.com

            var stringJSONArray = JSON.stringify(myJSONArray);     	// may be useful in projects
            alert(stringJSONArray);

            let dataHTML = "";

            for (let item of myJSONArray) {                             //creates a table with rows for every item in JSON array
                dataHTML += "<tr><td>" + item.name + "</td><td>" + item.source + "</td><td>" + item.feeds + "</td> </tr>";
            }
            document.getElementById("foodTable").innerHTML += dataHTML;

            dataHTML = "";                                             //clear the string
            for (let item of myJSONArray) {                            //creates a table with rows for every item in JSON array and a button - how cool?  Very
                dataHTML += "<tr><td>" + item.name + "</td><td>" + item.source + "</td><td> <button class='alertItemName'  data-itemID='" + item.name + "'>Click Me</button></td></tr>";
            }
            document.getElementById("foodTableWithButtons").innerHTML += dataHTML;

            // in your project, you will likely want something to happen when the user clicks on a record
            //  here we simply create an alert with the item name that was clicked
            //  an anonymous function is used (not needed for exam but we will use them in coursework)
            //  just use the structure below
            document.addEventListener("click", function (event) {
                if (event.target.matches('.alertItemName')) {                      //alertItemName is the class we gave all the button elements
                    var itemName = event.target.getAttribute("data-itemID");        //data-itemID is an attribute we gave the button
                    alert("You clicked on " + itemName);
                }
            });

        }


    </script>


</head>

<body>

<body onload="pageLoad()">

Welcome to the page

<button onclick='myFunction();'>RUN MY FUNCTION</button>


<div id="name"></div>

<div id="demo"></div>

<table id="foodTable"></table>

<BR>
<BR>
<table id="foodTableWithButtons"></table>


</body>

</html>